<!DOCTYPE html>
<html>
<head>
    <title>C√¢u h·ªèi {{ question.id }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        .correct-option {
            border-color: #2ecc71 !important;
            background: #e6ffe9 !important;
        }
        .wrong-option {
            border-color: #e74c3c !important;
            background: #ffe6e6 !important;
        }
        .disabled {
            pointer-events: none;
            opacity: 0.7;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- üîΩ Th√¥ng b√°o -->
    {% if answered %}
        {% if correct %}
            <h2 class="result-correct">üéâ Ch√≠nh x√°c!</h2>
        {% else %}
            <h2 class="result-wrong">‚ùå Sai r·ªìi!</h2>
            <p style="text-align:center; font-size:18px;">
                ƒê√°p √°n ƒë√∫ng l√†:
                <b>{{ question.answer }} ‚Äì {{ question.options[question.answer] }}</b>
            </p>
        {% endif %}
    {% endif %}

    <!-- üîΩ Dropdown ch·ªçn c√¢u h·ªèi -->
    <div style="text-align:right; margin-bottom:15px;">
        <select id="jumpTo" onchange="goToQuestion()" style="padding:6px; border-radius:6px;">
            {% for num in question_list %}
                <option value="{{ num }}" {% if num == q_id %}selected{% endif %}>
                    C√¢u {{ num }}
                </option>
            {% endfor %}
        </select>
    </div>

    <h2>C√¢u {{ question.id }}:</h2>
    <h2 style="font-weight: normal;">{{ question.question }}</h2>

    <form method="POST">

        {% for key, value in question.options.items() %}
        {% set css = "" %}

        {% if answered %}
            {% if key == question.answer %}
                {% set css = "correct-option disabled" %}
            {% elif key == user_answer and not correct %}
                {% set css = "wrong-option disabled" %}
            {% else %}
                {% set css = "disabled" %}
            {% endif %}
        {% endif %}

        <label class="option {{ css }}">
            <input type="radio" name="answer" value="{{ key }}" {% if answered %}disabled{% endif %} required>
            <b>{{ key }}.</b> {{ value }}
        </label>
        {% endfor %}

        <div style="text-align:center; margin-top:20px;">
            {% if not answered %}
                <button class="button" type="submit">Tr·∫£ l·ªùi</button>
            {% else %}
                <a href="/quiz/{{ q_id + 1 }}" class="button">üëâ C√¢u ti·∫øp theo</a>
            {% endif %}
        </div>

    </form>
</div>

<script>
function goToQuestion() {
    const id = document.getElementById("jumpTo").value;
    window.location.href = "/quiz/" + id;
}
</script>

</body>
</html>
